<!DOCTYPE html>
<html>
<head>
	<title>Recents is building your playlist</title>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
	<script src="js/socket.io.min.js"></script>
	<script src="js/progressbar.min.js"></script>
	<script src="../js/js.cookie.js"></script>

	<script type="text/javascript">
		var APP = "http://127.0.0.1/";

		$(document).ready(function(){
			var bar = new ProgressBar.Line('#progress-container', {
			  strokeWidth: 4,
			  easing: 'easeInOut',
			  duration: 1400,
			  color: '#1DB954',
			  trailColor: '#eee',
			  trailWidth: 1,
			  svgStyle: {width: '100%', height: '100%'}
			});

			var userId = Cookies.get('userId');
			//console.log(userId);

			var socket = io.connect('http://127.0.0.1:8080');
			socket.emit('new user', userId);

			socket.on('my message', function (data) {
			 alert(data);
			  //socket.emit('my other event', { my: 'data' });
			});

			socket.on('error', function (data) {
				if(data == "manage") {
					window.location.replace(APP + "manage");
				}
				alert("There was an error: " + data);
			});
		});
	</script>

	<style type="text/css">
		html{
			height: 100%;
		}

		body{
			height: 100%;
			margin: 0;
		}

		#primary-wrapper{
		  height: 100%;
          display: flex;
  		  justify-content: center;
  		  align-items: center;
		}

		#progress-container{
			width: 500px;
		}
	</style>
</head>
<body>
	<div id="primary-wrapper">
		<div id="progress-container">
		</div>
	</div>
</body>
</html>